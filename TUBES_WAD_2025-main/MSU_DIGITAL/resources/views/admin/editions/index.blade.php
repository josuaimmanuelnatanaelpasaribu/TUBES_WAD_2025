<!DOCTYPE html>\n<html lang=\"id\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Kelola Edisi Terjemahan & Tafsir - Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <style>\n        .action-buttons form { display: inline-block; margin-left: 5px; }\n    </style>\n</head>\n<body>\n    <div class=\"container mt-5 mb-5\">\n        <h1>Kelola Edisi Terjemahan & Tafsir</h1>\n\n        @if (session(\'success\'))\n            <div class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n                {{ session(\'success\') }}\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n            </div>\n        @endif\n        @if ($errors->any())\n            <div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n                <strong>Error!</strong>\n                <ul>\n                    @foreach ($errors->all() as $error)\n                        <li>{{ $error }}</li>\n                    @endforeach\n                </ul>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n            </div>\n        @endif\n\n        <div class=\"card mb-4\">\n            <div class=\"card-header\">Sinkronisasi dari API</div>\n            <div class=\"card-body\">\n                <p>Anda dapat menyinkronkan semua edisi terjemahan dan tafsir yang tersedia dari Al-Quran Cloud API ke sistem lokal. Edisi yang sudah ada akan di-update informasinya jika ada perubahan, dan edisi baru akan ditambahkan (default tidak aktif untuk pengguna).</p>\n                <form action=\"{{ route(\'admin.editions.sync\') }}\" method=\"POST\" onsubmit=\"return confirm(\'Anda yakin ingin menyinkronkan semua edisi dari API? Ini mungkin memerlukan beberapa saat.\');\">\n                    @csrf\n                    <button type=\"submit\" class=\"btn btn-primary\"><i class=\"bi bi-arrow-repeat\"></i> Sinkronkan Semua Edisi dari API</button>\n                </form>\n            </div>\n        </div>\n\n        <div class=\"card mb-4\">\n            <div class=\"card-header\">Edisi Tersedia dari API (Belum Ditambahkan ke Sistem)</div>\n            <div class=\"card-body\">\n                @if ($apiEditions->where(\'is_added\', false)->count() > 0)\n                    <div class=\"table-responsive\">\n                        <table class=\"table table-sm table-striped table-hover\">\n                            <thead>\n                                <tr>\n                                    <th>Identifier</th>\n                                    <th>Nama</th>\n                                    <th>Bahasa</th>\n                                    <th>Tipe</th>\n                                    <th>Aksi</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                @foreach ($apiEditions->where(\'is_added\', false) as $apiEdition)\n                                    <tr>\n                                        <td>{{ $apiEdition->identifier }}</td>\n                                        <td>{{ $apiEdition->name }} ({{ $apiEdition->englishName }})</td>\n                                        <td>{{ $apiEdition->language }}</td>\n                                        <td><span class=\"badge bg-secondary\"><small>{{ $apiEdition->type }}</small></span></td>\n                                        <td>\n                                            <form action=\"{{ route(\'admin.editions.add_from_api\') }}\" method=\"POST\">\n                                                @csrf\n                                                <input type=\"hidden\" name=\"identifier\" value=\"{{ $apiEdition->identifier }}\">\n                                                <input type=\"hidden\" name=\"name\" value=\"{{ $apiEdition->name }} ({{ $apiEdition->englishName }})\">\n                                                <input type=\"hidden\" name=\"language\" value=\"{{ $apiEdition->language }}\">\n                                                <input type=\"hidden\" name=\"type\" value=\"{{ $apiEdition->type }}\">\n                                                <button type=\"submit\" class=\"btn btn-sm btn-success\"><i class=\"bi bi-plus-circle\"></i> Tambahkan ke Sistem</button>\n                                            </form>\n                                        </td>\n                                    </tr>\n                                @endforeach\n                            </tbody>\n                        </table>\n                    </div>\n                @else\n                    <p class=\"text-muted\">Semua edisi terjemahan dan tafsir dari API sudah ada di sistem lokal atau tidak ada edisi baru yang ditemukan.</p>\n                @endif\n            </div>\n        </div>\n\n        <div class=\"card\">\n            <div class=\"card-header\">Edisi Lokal (Tersimpan di Sistem)</div>\n            <div class=\"card-body\">\n                @if ($localEditions->count() > 0)\n                    <div class=\"table-responsive\">\n                        <table class=\"table table-striped table-hover\">\n                            <thead>\n                                <tr>\n                                    <th>Identifier API</th>\n                                    <th>Nama Lokal</th>\n                                    <th>Bahasa</th>\n                                    <th>Tipe</th>\n                                    <th>Status untuk User</th>\n                                    <th>Aksi</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                @foreach ($localEditions as $edition)\n                                    <tr>\n                                        <td>{{ $edition->api_edition_identifier }}</td>\n                                        <td>{{ $edition->name }}</td>\n                                        <td>{{ $edition->language_code }}</td>\n                                        <td><span class=\"badge bg-info\"><small>{{ $edition->type }}</small></span></td>\n                                        <td>\n                                            @if ($edition->is_active_for_users)\n                                                <span class=\"badge bg-success\">Aktif</span>\n                                            @else\n                                                <span class=\"badge bg-danger\">Tidak Aktif</span>\n                                            @endif\n                                        </td>\n                                        <td>\n                                            <form action=\"{{ route(\'admin.editions.toggle_availability\', $edition) }}\" method=\"POST\">\n                                                @csrf\n                                                @method(\'PATCH\')\n                                                <button type=\"submit\" class=\"btn btn-sm {{ $edition->is_active_for_users ? \'btn-warning\' : \'btn-success\' }}\">\n                                                    {{ $edition->is_active_for_users ? \'Nonaktifkan\' : \'Aktifkan\' }}\n                                                </button>\n                                            </form>\n                                        </td>\n                                    </tr>\n                                @endforeach\n                            </tbody>\n                        </table>\n                    </div>\n                @else\n                    <p class=\"text-muted\">Belum ada edisi yang disimpan secara lokal. Coba sinkronkan dari API.</p>\n                @endif\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    {{-- Tambahkan ikon Bootstrap jika ingin menggunakan ikon pada tombol --}}\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\">\n</body>\n</html> 