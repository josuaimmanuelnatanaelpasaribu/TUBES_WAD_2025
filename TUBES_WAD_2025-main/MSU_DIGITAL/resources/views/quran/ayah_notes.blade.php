@extends(\'layouts.app\')\n\n@section(\'title\', \"Notes for S{\$surah->number}:A{\$ayah->numberInSurah} - MSU Quran\")\n\n@section(\'content\')\n<div class=\"quran-content-container\">\n    <a href=\"{{ url()->previous() ?: route(\'quran.index\') }}\" class=\"back-link\">&laquo; Back</a>\n\n    <h2>Notes for Surah {{ \$surah->englishName }} ({{ \$surah->name }}), Ayah {{ \$ayah->numberInSurah }}</h2>\n    \n    <div class=\"ayah-context-display\">\n        <p class=\"ayah-text arabic\">{{ \$ayah->text }}</p>\n        {{-- Anda bisa menambahkan terjemahan di sini jika tersedia dalam objek \$ayah --}}\n        {{-- Contoh: <p class=\"ayah-text translation\">{{ \$ayah->translation_text }}</p> --}}\n    </div>\n\n    <div class=\"notes-section\">\n        <h3>Your Notes:</h3>\n        @if(isset(\$notes) && count(\$notes) > 0)\n            <ul class=\"verse-notes-list\">\n                @foreach(\$notes as \$note)\n                    <li>\n                        <div class=\"note-content\">{!! nl2br(e(\$note[\'content\'])) !!}</div>\n                        <small class=\"note-timestamp\">Last updated: {{ \\Carbon\\Carbon::parse(\$note[\'updated_at\'])->format(\'d M Y, H:i\') }}</small>\n                        <div class=\"note-actions\">\n                            <a href=\"{{ route(\'quran.notes.editForm\', ['surahNumber' => \$surah->number, 'ayahNumber' => \$ayah->numberInSurah, 'noteId' => \$note['id']]) }}\" class=\"btn btn-edit\">Edit</a>\n                            <form action=\"{{ route(\'quran.notes.delete\', ['noteId' => \$note['id']]) }}\" method=\"POST\" style=\"display: inline;\">\n                                @csrf\n                                @method(\'DELETE\')\n                                <input type=\"hidden\" name=\"surah_number_redirect\" value=\"{{ \$surah->number }}\">\n                                <input type=\"hidden\" name=\"ayah_number_redirect\" value=\"{{ \$ayah->numberInSurah }}\">\n                                <button type=\"submit\" class=\"btn btn-delete\" onclick=\"return confirm(\'Are you sure you want to delete this note?\')\">Delete</button>\n                            </form>\n                        </div>\n                    </li>\n                @endforeach\n            </ul>\n        @else\n            <p>You have no notes for this Ayah yet.</p>\n        @endif\n    </div>\n\n    <hr class=\"separator\">\n\n    <div class=\"add-note-form-container\">\n        <h3>Add New Note:</h3>\n        <form action=\"{{ route(\'quran.notes.add\', ['surahNumber' => \$surah->number, 'ayahNumber' => \$ayah->numberInSurah]) }}\" method=\"POST\">\n            @csrf\n            <div>\n                <textarea name=\"content\" rows=\"5\" class=\"form-textarea\" placeholder=\"Write your note here...\" required>{{ old(\'content\') }}</textarea>\n                @error(\'content\') <span class=\"form-error\">{{ \$message }}</span> @enderror\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Save Note</button>\n        </form>\n    </div>\n</div>\n@endsection\n\n@push(\'styles\')\n<style>\n.quran-content-container {\n    padding: 15px;\n}\n.back-link {\n    display: inline-block;\n    margin-bottom: 15px;\n    color: #3498db;\n    text-decoration: none;\n}\n.back-link:hover {\n    text-decoration: underline;\n}\n.ayah-context-display {\n    margin-bottom: 20px;\n    padding:15px;\n    background-color:#f9f9f9;\n    border: 1px solid #eee;\n    border-radius:5px;\n}\n.ayah-text.arabic {\n    font-size: 1.8em; /* Lebih besar untuk teks Arab */\n    direction: rtl;\n    text-align: right;\n    font-family: \'Traditional Arabic\', \'Al Mushaf\', \'KFGQPC Uthman Taha Naskh\', serif; /* Font Arab */\n    line-height: 1.8;\n}\n.notes-section, .add-note-form-container {\n    margin-bottom: 20px;\n}\n.separator {\n    margin-top: 20px;\n    margin-bottom: 20px;\n    border: 0;\n    border-top: 1px solid #eee;\n}\n.verse-notes-list {\n    list-style: none;\n    padding: 0;\n}\n.verse-notes-list li {\n    border: 1px solid #e9e9e9;\n    background-color: #fdfdfd;\n    padding: 15px;\n    margin-bottom: 10px;\n    border-radius: 4px;\n}\n.note-content {\n    margin-bottom: 8px;\n    white-space: pre-wrap; /* Agar newline dari textarea ditampilkan */\n    line-height: 1.6;\n}\n.note-timestamp {\n    font-size: 0.85em;\n    color: #777;\n    margin-bottom: 10px;\n    display: block;\n}\n.note-actions .btn {\n    font-size: 0.9em;\n    padding: 6px 12px;\n    text-decoration: none;\n    border-radius: 3px;\n    margin-right: 5px;\n    border: none;\n    cursor: pointer;\n}\n.note-actions .btn-edit {\n    background-color: #5dade2;\n    color: white;\n}\n.note-actions .btn-edit:hover { background-color: #3498db; }\n.note-actions .btn-delete {\n    background-color: #e74c3c;\n    color: white;\n}\n.note-actions .btn-delete:hover { background-color: #c0392b; }\n\n.form-textarea {\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-sizing: border-box; /* Agar padding tidak menambah lebar total */\n    margin-bottom: 10px;\n}\n.btn-primary {\n    background-color: #2ecc71;\n    color: white;\n    padding: 10px 15px;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n.btn-primary:hover { background-color: #27ae60; }\n.form-error {\n    color: red;\n    font-size: 0.85em;\n    display: block;\n    margin-top: -5px;\n    margin-bottom: 10px;\n}\n</style>\n@endpush 